import java.util.ArrayList;
import java.util.Scanner;

public class SistemaHotel {

    /* 
       CLASE CLIENTE
       Esta clase guarda los datos personales del cliente.
       Es como la "ficha" de la persona que reserva.
       */
    static class Cliente {
        // Atributos b√°sicos del cliente
        private String id;
        private String nombre;
        private String telefono;
        private String email;

        // Constructor: sirve para crear un cliente con sus datos
        public Cliente(String id, String nombre, String telefono, String email) {
            this.id = id;
            this.nombre = nombre;
            this.telefono = telefono;
            this.email = email;
        }

        // Este m√©todo devuelve el ID del cliente, lo usamos para buscarlo m√°s adelante
        public String getId() {
            return id;
        }

        // Aqu√≠ devolvemos todos los datos del cliente en formato de texto
        @Override
        public String toString() {
            return "Cliente {" +
                    "ID='" + id + '\'' +
                    ", Nombre='" + nombre + '\'' +
                    ", Tel√©fono='" + telefono + '\'' +
                    ", Email='" + email + '\'' +
                    '}';
        }
    }

    /* 
       CLASE RESERVA
       Esta clase representa una reserva de habitaci√≥n.
       Contiene el ID del cliente, fechas y el total a pagar.
        */
    static class Reserva {
        private String id;
        private String habitacionId;
        private String clienteId;
        private String fechaInicio;
        private String fechaFin;
        private String estado;
        private double total;

        // Constructor: cuando queremos crear una nueva reserva, usamos este.
        public Reserva(String id, String habitacionId, String clienteId,
                       String fechaInicio, String fechaFin, String estado, double total) {
            this.id = id;
            this.habitacionId = habitacionId;
            this.clienteId = clienteId;
            this.fechaInicio = fechaInicio;
            this.fechaFin = fechaFin;
            this.estado = estado;
            this.total = total;
        }

        // Este m√©todo sirve solo para mostrar la reserva en pantalla
        @Override
        public String toString() {
            return "Reserva {" +
                    "ID='" + id + '\'' +
                    ", Habitaci√≥n='" + habitacionId + '\'' +
                    ", Cliente='" + clienteId + '\'' +
                    ", FechaInicio='" + fechaInicio + '\'' +
                    ", FechaFin='" + fechaFin + '\'' +
                    ", Estado='" + estado + '\'' +
                    ", Total=" + total +
                    '}';
        }
    }

    /* 
       VARIABLES GLOBALES
       Aqu√≠ guardamos todas las listas y el lector de teclado.
       */
    private static ArrayList<Cliente> clientes = new ArrayList<>(); // donde se guardan los clientes
    private static ArrayList<Reserva> reservas = new ArrayList<>(); // donde se guardan las reservas
    private static Scanner sc = new Scanner(System.in); // para leer lo que el usuario escribe

    /* 
       M√âTODO PRINCIPAL
       Este es el punto de inicio del programa.
       Muestra el men√∫ principal y dirige a los otros men√∫s.
       */
    public static void main(String[] args) {
        int opcion;
        do {
            // Mostramos el men√∫ principal
            System.out.println("\n========= MEN√ö PRINCIPAL =========");
            System.out.println("1. Men√∫ de clientes");
            System.out.println("2. Men√∫ de reservas");
            System.out.println("0. Salir");
            System.out.print("Seleccione una opci√≥n: ");
            opcion = sc.nextInt();
            sc.nextLine(); // esto limpia el salto de l√≠nea

            // Dependiendo de lo que elija el usuario, hacemos algo distinto
            switch (opcion) {
                case 1 -> menuClientes();   // ir al men√∫ de clientes
                case 2 -> menuReservas();   // ir al men√∫ de reservas
                case 0 -> System.out.println("üëã Saliendo del sistema...");
                default -> System.out.println("‚ö† Opci√≥n no v√°lida. Intente de nuevo.");
            }
        } while (opcion != 0); // repetimos hasta que el usuario escriba 0
    }

    /* 
       MEN√ö DE CLIENTES
       Aqu√≠ se maneja todo lo relacionado con los clientes.
      */
    private static void menuClientes() {
        int op;
        do {
            System.out.println("\n----- MEN√ö CLIENTES -----");
            System.out.println("1. Agregar cliente");
            System.out.println("2. Mostrar clientes");
            System.out.println("0. Volver al men√∫ principal");
            System.out.print("Seleccione una opci√≥n: ");
            op = sc.nextInt();
            sc.nextLine();

            switch (op) {
                case 1 -> agregarCliente();   // opci√≥n para crear un nuevo cliente
                case 2 -> mostrarClientes();  // opci√≥n para ver todos los clientes
                case 0 -> System.out.println("Volviendo al men√∫ principal...");
                default -> System.out.println("Opci√≥n no v√°lida.");
            }
        } while (op != 0); // repetimos hasta que el usuario elija volver
    }

    // Este m√©todo pide los datos del cliente y lo guarda en la lista
    private static void agregarCliente() {
        System.out.print("Ingrese ID del cliente: ");
        String id = sc.nextLine();

        System.out.print("Ingrese nombre: ");
        String nombre = sc.nextLine();

        System.out.print("Ingrese tel√©fono: ");
        String telefono = sc.nextLine();

        System.out.print("Ingrese correo electr√≥nico: ");
        String email = sc.nextLine();

        // Creamos un nuevo objeto cliente con los datos escritos
        Cliente nuevo = new Cliente(id, nombre, telefono, email);

        // Lo agregamos a la lista general de clientes
        clientes.add(nuevo);
        System.out.println("‚úÖ Cliente agregado correctamente.");
    }

    // Este m√©todo recorre la lista de clientes y los muestra
    private static void mostrarClientes() {
        if (clientes.isEmpty()) {
            System.out.println("No hay clientes registrados.");
        } else {
            System.out.println("\n--- LISTA DE CLIENTES ---");
            for (Cliente c : clientes) {
                System.out.println(c); // imprime usando el toString del cliente
            }
        }
    }

    /* 
       MEN√ö DE RESERVAS
       Aqu√≠ manejamos todo lo relacionado con las reservas.
     */
    private static void menuReservas() {
        int op;
        do {
            System.out.println("\n----- MEN√ö RESERVAS -----");
            System.out.println("1. Agregar reserva");
            System.out.println("2. Mostrar reservas");
            System.out.println("0. Volver al men√∫ principal");
            System.out.print("Seleccione una opci√≥n: ");
            op = sc.nextInt();
            sc.nextLine();

            switch (op) {
                case 1 -> agregarReserva();   // crear nueva reserva
                case 2 -> mostrarReservas();  // ver reservas existentes
                case 0 -> System.out.println("Volviendo al men√∫ principal...");
                default -> System.out.println("Opci√≥n no v√°lida.");
            }
        } while (op != 0);
    }

    // Este m√©todo pide los datos y crea una nueva reserva
    private static void agregarReserva() {
        System.out.print("Ingrese ID de la reserva: ");
        String id = sc.nextLine();

        System.out.print("Ingrese ID de la habitaci√≥n: ");
        String habitacionId = sc.nextLine();

        System.out.print("Ingrese ID del cliente: ");
        String clienteId = sc.nextLine();

        // Aqu√≠ comprobamos si el cliente existe antes de permitir la reserva
        boolean clienteExiste = false;
        for (Cliente c : clientes) {
            if (c.getId().equals(clienteId)) {
                clienteExiste = true;
                break;
            }
        }

        // Si el cliente no existe, avisamos y no se crea la reserva
        if (!clienteExiste) {
            System.out.println(" El cliente con ese ID no existe. Reg√≠strelo primero.");
            return;
        }

        System.out.print("Ingrese fecha de inicio (YYYY-MM-DD): ");
        String fechaInicio = sc.nextLine();

        System.out.print("Ingrese fecha de fin (YYYY-MM-DD): ");
        String fechaFin = sc.nextLine();

        System.out.print("Ingrese estado (activa, cancelada, finalizada): ");
        String estado = sc.nextLine();

        System.out.print("Ingrese total a pagar: ");
        double total = sc.nextDouble();
        sc.nextLine(); // limpia el salto de l√≠nea

        // Creamos el objeto reserva con toda la informaci√≥n
        Reserva nueva = new Reserva(id, habitacionId, clienteId, fechaInicio, fechaFin, estado, total);

        // Guardamos la reserva en la lista general
        reservas.add(nueva);
        System.out.println(" Reserva creada correctamente.");
    }

    // Muestra todas las reservas existentes
    private static void mostrarReservas() {
        if (reservas.isEmpty()) {
            System.out.println("No hay reservas registradas.");
        } else {
            System.out.println("\n--- LISTA DE RESERVAS ---");
            for (Reserva r : reservas) {
                System.out.println(r); // imprimimos cada reserva
            }
        }
    }
}

